meta:
  name: ASTROLOGY_RULES_v2.15.4_single
  version: 2.15.4
  profile_default: AP-SUPER
  notes:
  - Always-evaluate interpretive channels; tag by default; promote when thresholds
    are met.
  - Predictive corridor stays lean; no smoothing; robust zscore→tanh ±100.
  - File-type-aware dataset resolver; minimal profile set (LITE, SUPER, EXTREME, DEBUG).
engine:
  house: whole
  node: true
  tz: America/New_York
  reloc: 'no'
  sidereal: 'no'
  stars: precess
  sf: 'on'
  tob: est±0:45
timing:
  bin_minutes: 60
  smoothing_bins: 1
performance:
  vectorize: true
  cache_positions: true
  prefilter_orb_margin_deg: 3.0
  max_hits_per_channel_per_hour: 50
  max_tag_list_len: 6
  prefer_exact_sort: true
aspects:
- name: conjunction
  angle: 0
  weight: 1.0
  orb_mult: 1.0
- name: sextile
  angle: 60
  weight: 0.6
  orb_mult: 0.85
- name: square
  angle: 90
  weight: 0.95
  orb_mult: 0.9
- name: trine
  angle: 120
  weight: 0.8
  orb_mult: 0.9
- name: opposition
  angle: 180
  weight: 1.0
  orb_mult: 1.0
minor_aspects:
- name: quincunx
  angle: 150
  weight: 0.45
  orb_mult: 0.8
- name: semisextile
  angle: 30
  weight: 0.35
  orb_mult: 0.75
- name: semisquare
  angle: 45
  weight: 0.5
  orb_mult: 0.8
- name: sesquisquare
  angle: 135
  weight: 0.5
  orb_mult: 0.8
orbs_deg_by_transit:
  Moon: 6.0
  Sun: 5.0
  Mercury: 4.0
  Venus: 4.0
  Mars: 3.5
  Jupiter: 3.0
  Saturn: 3.0
  Uranus: 2.5
  Neptune: 2.5
  Pluto: 2.0
weights_by_transit:
  Moon: 0.4
  Sun: 0.6
  Mercury: 0.5
  Venus: 0.55
  Mars: 0.85
  Jupiter: 0.75
  Saturn: 1.0
  Uranus: 1.05
  Neptune: 0.85
  Pluto: 1.1
energy_type_by_transit:
  Moon: sharp/flashpoint
  Sun: sharp/flashpoint
  Mercury: sharp/flashpoint
  Venus: sharp/flashpoint
  Mars: sharp/flashpoint
  Jupiter: broad/background
  Saturn: broad/background
  Uranus: broad/background
  Neptune: broad/background
  Pluto: broad/background
event_precision_by_transit:
  Moon: day-specific
  Sun: day-specific
  Mercury: day-specific
  Venus: day-specific
  Mars: day-specific
  Jupiter: windowed only
  Saturn: windowed only
  Uranus: windowed only
  Neptune: windowed only
  Pluto: windowed only
external_internal_by_aspect:
  conjunction:
  - 0.55
  - 0.45
  sextile:
  - 0.4
  - 0.6
  square:
  - 0.65
  - 0.35
  trine:
  - 0.45
  - 0.55
  opposition:
  - 0.7
  - 0.3
points_supported:
- Vertex
- AntiVertex
- NorthNode
- SouthNode
- Chiron
- Fortune
orbs_deg_by_transit_for_points:
  Vertex: 2.0
  AntiVertex: 2.0
  NorthNode: 3.0
  SouthNode: 3.0
  Chiron: 2.5
  Fortune: 2.0
weights_by_transit_to_points:
  Vertex: 1.05
  AntiVertex: 0.95
  NorthNode: 0.85
  SouthNode: 0.8
  Chiron: 0.8
  Fortune: 0.75
angles_supported:
- ASC
- MC
- DSC
- IC
orbs_deg_angles: 2.0
weights_to_angles:
  ASC: 1.2
  MC: 1.25
  DSC: 1.1
  IC: 1.1
lunar_cycles:
  predictive:
  - type: new_moon
  - type: full_moon
  - type: eclipse_solar
  - type: eclipse_lunar
  interpretive:
  - type: first_quarter
  - type: last_quarter
  - type: lunar_return
modules:
  transits:
    enabled: true
    dataset_type: ephemeris_hourly
    multiplier: 1.0
  composite_synastry:
    enabled: true
    composite_type: composite_chart
    synastry_type: synastry_aspects
    multiplier_composite: 1.1
    multiplier_synastry: 0.95
    orb_scale: 0.95
  secondary_progressions:
    enabled: true
    dataset_type: progressions_solararc
    channel: progressed
    multiplier: 0.85
    orb_scale: 0.9
  solar_arc:
    enabled: true
    dataset_type: progressions_solararc
    channel: solar_arc
    multiplier: 0.9
    orb_scale: 0.9
  harmonics:
    enabled: true
    dataset_type: harmonics
    multiplier: 0.6
    orb_scale: 0.8
  draconic:
    enabled: true
    dataset_type: draconic
    multiplier: 0.7
    orb_scale: 0.85
  davison:
    enabled: true
    composite_type: davison_composite
    multiplier: 0.75
    orb_scale: 0.9
  declination_parallels:
    enabled: true
    max_orb_deg_equiv: 0.5
    weight: 0.85
  midpoints:
    enabled: true
    orb_deg: 1.5
    weight: 0.7
  house_fields:
    enabled: true
    cusp_orb_deg: 1.5
    weights_by_house_hint:
      '1': 1.0
      '2': 0.6
      '3': 0.7
      '4': 0.8
      '5': 0.75
      '6': 0.7
      '7': 1.0
      '8': 0.85
      '9': 0.7
      '10': 1.0
      '11': 0.65
      '12': 0.75
dataset_resolver:
  ephemeris_hourly:
  - ephem_hourly_*.csv
  - ephemeris_hourly_*.csv
  progressions_solararc:
  - '*Transit_Progressed_SolarArc*_*.csv'
  - '*Transit_Progressed_SolarArc*.csv'
  composite_chart:
  - '*Combined_Charts*_*.csv'
  - '*Combined_Charts*.csv'
  davison_composite:
  - '*Davison*_*.csv'
  - '*Davison*.csv'
  harmonics:
  - '*Harmonics*1-12**.csv'
  - '*Harmonics*1-12*.csv'
  - '*Harmonics*.csv'
  draconic:
  - '*Draconic*Structured*.csv'
  - '*Draconic*.csv'
  broad_ephemeris:
  - Ephemeris*1900-2050*0.25*month*steps*.csv
  - Ephemeris*1900-2050*.csv
  synastry_aspects:
  - '*Synastry_Aspects*_*.csv'
  - '*Synastry_Aspects*.csv'
profiles:
  AP-LITE:
    include_modules:
    - transits
    include_points:
    - Vertex
    - AntiVertex
    comment: Minimal, fast scan with contact gates.
  AP-SUPER:
    include_modules:
    - transits
    - composite_synastry
    - secondary_progressions
    - solar_arc
    include_points:
    - Vertex
    - AntiVertex
    - NorthNode
    - SouthNode
    - Chiron
    - Fortune
    comment: Validated signal only. Interpretive channels evaluated but tag-only unless
      promoted.
  AP-EXTREME:
    include_modules:
    - transits
    - composite_synastry
    - secondary_progressions
    - solar_arc
    - harmonics
    - draconic
    - davison
    - declination_parallels
    - midpoints
    - house_fields
    include_points:
    - Vertex
    - AntiVertex
    - NorthNode
    - SouthNode
    - Chiron
    - Fortune
    comment: Kitchen sink; everything contributes.
  DEBUG:
    include_modules:
    - transits
    - composite_synastry
    - secondary_progressions
    - solar_arc
    include_points:
    - Vertex
    - AntiVertex
    - NorthNode
    - SouthNode
    - Chiron
    - Fortune
    debug_output: all_hits_per_hour
    comment: Same as AP-SUPER, but dumps full hit lists pre-corridor.
interpretive_channels:
  evaluate_always: true
  noise_floor:
    min_orb_closeness: 0.25
    min_unit_weight: 0.3
  tiers:
    tag_min_orb_closeness: 0.4
    tag_min_unit_weight: 0.5
    promote_min_orb_closeness: 0.6
    promote_min_unit_weight: 0.8
  promotion:
  - name: reinforce_predictive_peak
    within_minutes: 90
    min_reinforcing_hits: 2
    min_symbolic_weight_sum: 1.2
    adds_weight_scale: 0.5
    max_stack_fraction: 0.3
  - name: rare_symbolic_exact
    within_minutes: 60
    tight_orb_deg: 0.5
    min_symbolic_weight_sum: 1.5
    adds_weight_scale: 0.35
    max_stack_fraction: 0.25
  channel_scales:
    harmonics:
      promote_scale: 0.3
      tag_label: Harmonics resonance
    draconic:
      promote_scale: 0.35
      tag_label: Draconic overlay
    davison:
      promote_scale: 0.35
      tag_label: Davison tone
    declination_parallels:
      promote_scale: 0.5
      tag_label: Declination parallel
    midpoints:
      promote_scale: 0.4
      tag_label: Midpoint hit
    house_fields:
      promote_scale: 0.3
      tag_label: House field
    lunar_cycles:
      interpretive:
        promote_scale: 0.3
        tag_label: Lunar cycle (context)
  tagging:
    include_minor_aspects: true
    include_notes: true
  ledger:
    enabled: true
    include:
    - ignored_count
    - tagged_list
    - promoted_list
    - added_weight_sum
probability_corridor:
  apply: true
  thresholds:
    low_max: 0.35
    med_max: 0.65
  normalization:
    mode: zscore_tanh_pm100
    center: median
    scale: MAD_to_sigma
    clip_pm: 100
visualization:
  enabled: false
  style: valence_aware_multi
  show_bands: false
  show_threshold_lines: false
  defaults:
    index_range:
    - -100
    - 100
    baseline_zero: true
    shade_method: top_percentile
    percentile: 90
