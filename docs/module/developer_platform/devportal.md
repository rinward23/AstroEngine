# Developer Platform · Developer Portal Submodule

- **Author**: Documentation & Education Working Group
- **Date**: 2024-05-27
- **Scope**: Submodule `developer_platform/devportal` covering channels `docs`, `playground`, and `collections`. Manages the static documentation site, runnable playground, and downloadable API collections.

## Inputs

| Input | Location | Notes |
|-------|----------|-------|
| OpenAPI schema | `openapi/v{major}.{minor}.json` | Drives autogenerated API reference, code samples, and collection exports. |
| Solar Fire & Swiss Ephemeris fixtures | `datasets/solarfire/`, `datasets/sweph/` | Supply real astrological data for examples, playground seeds, and regression snapshots. |
| SDK snippets | `sdks/typescript/examples/`, `sdks/python/examples/` | Provide runnable examples cross-referenced in docs. |
| Changelog entries | `docs/burndown.md`, `docs/module/*` | Ensure version history reflects released capabilities. |

## Outputs

| Channel | Artefact | Deployment |
|---------|----------|------------|
| `docs` | Docusaurus site under `devportal/` with guides, quickstarts, changelog, and governance links. | Published to GitHub Pages / Netlify per release. |
| `playground` | Live API playground hitting sandbox endpoints with Solar Fire-backed datasets. | Hosted within Developer Portal via embedded React app. |
| `collections` | Postman and Insomnia collections exported from OpenAPI plus environment templates referencing sandbox URLs. | Distributed as downloadable artefacts alongside releases. |

## Content Architecture

1. **Guides** – Feature-based walkthroughs (Elections, Aspect Search, Returns, Progressions, Horary, Vedic, Mundane). Each guide references Solar Fire example datasets and provides CLI + SDK snippets.
2. **Quickstarts** – Step-by-step setup for TypeScript and Python, including API key/OIDC configuration, retries, pagination, streaming, and idempotency usage.
3. **API Reference** – Auto-generated from OpenAPI with hand-curated annotations for idempotency headers, pagination fields, and error codes.
4. **Cookbook** – 10–30 line snippets for common tasks; examples validated against real dataset outputs stored in `docs/examples/*.json`.
5. **Changelog & Status** – Release log cross-linking to SDK/CLI versions and dataset hashes; status badge sourced from observability pipeline.
6. **Playground** – Embedded React app using `@astroengine/sdk` against sandbox endpoints seeded with Solar Fire exports. Requires user-provided API key/OIDC token stored in session storage (never persisted to server).

## Collections Workflow

1. Generate Postman collection via `scripts/export_postman.py --schema openapi/vX.Y.json --output devportal/collections/postman_vX.Y.json`.
2. Generate Insomnia collection using `scripts/export_insomnia.ts` with same schema.
3. Embed dataset provenance (Solar Fire export hash, Swiss Ephemeris build) in collection metadata.
4. Publish zipped bundle alongside documentation release and link from downloads page.

## Observability & Governance

- Playground logs segregated with anonymised identifiers; telemetry includes dataset hash references ensuring reproducibility.
- Docs build includes automated link checker and sample execution harness that verifies each code block using mock server seeded with real data.
- Version switcher exposes historical docs tied to previous `openapi/v*.json` schemas; ensures developers can reference legacy behaviour without module loss.
- Accessibility guidelines follow WCAG 2.1 AA; colour palettes validated for charts that visualise astrological cycles.

## Acceptance Checklist

- [ ] OpenAPI schema frozen and imported into docs build.
- [ ] Guides, quickstarts, and cookbook recipes reference real Solar Fire or Swiss Ephemeris data with citations.
- [ ] Playground deployed with sandbox credentials, rate limits, and dataset provenance banners.
- [ ] Postman/Insomnia collections generated with schema hash metadata.
- [ ] Changelog updated with SDK, CLI, and dataset versions.
